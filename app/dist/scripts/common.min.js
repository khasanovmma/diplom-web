"use strict";

setTimeout(function () {
  var option = document.querySelector("option");
  option.innerHTML = "Tilni o'zgartirish";
}, 1500);
var link = document.querySelectorAll(".pagination__a");
var newsBox = document.querySelector(".news__box");

for (var i = 0; i < link.length; i++) {
  link[i].addEventListener("click", function (e) {
    e.preventDefault();
    newsBox.remove();
    get = e.target.getAttribute("href");
    fetch("".concat(location.href).concat(get)).then(function (response) {
      return response.text();
    }).then(function (data) {
      var div = document.querySelector(".news .container .title");
      var parsedResponse = new window.DOMParser().parseFromString(data, "text/html");
      setTimeout(function () {
        var newsBox = document.querySelectorAll(".news__box");
        newsBox[1].remove();
      }, 100);
      var newBox = parsedResponse.querySelector(".news__box");
      div.after(newBox);
    });
  });
}

var nav = document.querySelector(".nav");
var navLink = document.querySelectorAll(".nav__link");
var navItems = document.querySelectorAll(".nav__items");
window.addEventListener("scroll", function () {
  var scrollDistance = window.scrollY;
  console.log(window.scrollY);

  if (window.innerWidth > 768) {
    document.querySelectorAll(".sections-body").forEach(function (el, i) {
      if (el.offsetTop - document.querySelector(".nav").clientHeight <= scrollDistance) {
        document.querySelectorAll(".nav a").forEach(function (el) {
          if (el.classList.contains("active")) {
            el.classList.remove("active");
          }
        });
        document.querySelectorAll(".nav li")[i].querySelector("a").classList.add("active");
      }
    });
  }

  if (window.scrollY > 400) {
    nav.style = "background-color: var(--blue);\n                     transition: .5s;";

    for (var _i = 0; _i < navItems.length; _i++) {
      navItems[_i].style = "background-color: var(--blue)";
      navLink[_i].style = "color: #fff";
    }
  } else {
    nav.style = "background-color: none;\n                     transition: .5s;";

    for (var _i2 = 0; _i2 < navItems.length; _i2++) {
      navItems[_i2].style = "background-color: #fff";
      navLink[_i2].style = "color: var(--black)";
    }
  }
});
var modal = document.querySelector(".modal");
var html = document.querySelector("html");
var modalTitle = document.querySelector(".modal-block__title");
var modalContent = document.querySelector(".modal-block__text");
var newsTitle = document.querySelectorAll(".news-block__title");
var newsContent = document.querySelectorAll(".news-block__text");
var overflow = document.querySelectorAll('.modal-block__text');
var btn = document.querySelectorAll("#myBtn");
var span = document.getElementsByClassName("close")[0];

var _loop = function _loop(_i3) {
  btn[_i3].addEventListener("click", function () {
    console.log(modalTitle.innerHTML);
    modal.style.display = "block";
    html.style.overflow = "hidden";
    overflow[_i3].style = "max-height: max-content;";
    modalTitle.innerHTML = newsTitle[_i3].innerHTML;
    modalContent.innerHTML = newsContent[_i3].innerHTML;
  });
};

for (var _i3 = 0; _i3 < btn.length; _i3++) {
  _loop(_i3);
}

span.onclick = function () {
  modal.style.display = "none";
  html.style.overflow = "auto";

  for (var _i4 = 0; _i4 < btn.length; _i4++) {
    overflow[_i4].style = "max-height: 15px;";
  }
};

window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
    html.style.overflow = "auto";

    for (var _i5 = 0; _i5 < btn.length; _i5++) {
      overflow[_i5].style = "max-height: 15px;";
    }
  }
};

var modalContact = document.querySelector(".modal-contact");
var contactBtn = document.querySelector("#contactBtn");
var contactSpan = document.getElementsByClassName("close")[1];
console.log(contactBtn);
contactBtn.addEventListener("click", function () {
  console.log("clicked");
  modalContact.style.display = "block";
  html.style.overflow = "hidden";
  setTimeout(function () {
    document.querySelectorAll(".contact__input")[0].value = "";
    document.querySelectorAll(".contact__input")[1].value = "";
    document.querySelector(".contact__textarea").value = "";
  }, 100);
});

contactSpan.onclick = function () {
  modalContact.style.display = "none";
  html.style.overflow = "auto";
};

window.onclick = function (event) {
  if (event.target == modalContact) {
    modalContact.style.display = "none";
    html.style.overflow = "auto";
  }
};

function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: "uz"
  }, "google_translate_element");
}

function animate(obj, initVal, lastVal, duration) {
  var startTime = null; //get the current timestamp and assign it to the currentTime variable

  var currentTime = Date.now(); //pass the current timestamp to the step function

  var step = function step(currentTime) {
    //if the start time is null, assign the current time to startTime
    if (!startTime) {
      startTime = currentTime;
    } //calculate the value to be used in calculating the number to be displayed


    var progress = Math.min((currentTime - startTime) / duration, 1); //calculate what to be displayed using the value gotten above

    obj.innerHTML = Math.floor(progress * (lastVal - initVal) + initVal); //checking to make sure the counter does not exceed the last value (lastVal)

    if (progress < 1) {
      window.requestAnimationFrame(step);
    } else {
      window.cancelAnimationFrame(window.requestAnimationFrame(step));
    }
  }; //start animating


  window.requestAnimationFrame(step);
}

var text1 = document.getElementById("value1");
var text2 = document.getElementById("value2");
var text3 = document.getElementById("value3");

var load = function load() {
  animate(text1, 0, 564, 5000);
  animate(text2, 0, 10153, 5000);
  animate(text3, 100, 10717, 5000);
}; // nav link


var links = document.querySelectorAll(".nav__link");
var pages = document.querySelectorAll(".page"); // nav

var navControl = document.querySelectorAll(".nav__btn, .nav__close"),
    navToggle = document.querySelectorAll(".nav__btn, .nav__list");
navControl.forEach(function (btn) {
  return btn.addEventListener("click", function () {
    navToggle.forEach(function (el) {
      return el.classList.toggle("open");
    });
  });
}); // slider

var $slider = document.querySelector(".slider");
var $sliderBtn = document.querySelectorAll("[data-target]");
var $sliderItem = document.querySelectorAll(".slider__item");
var activeSlide = 0;
$sliderItem.forEach(function (item, i) {
  if (item.classList.contains("active")) {
    activeSlide = i;
  }
});
$sliderBtn.forEach(function (btn) {
  btn.addEventListener("click", function (e) {
    sliderMove(e.target.getAttribute("id"));
  });
});

function sliderMove(direction) {
  if (direction === "next") {
    if (activeSlide < $sliderItem.length - 1) {
      activeSlide++;
    } else {
      activeSlide = 0;
    }
  } else {
    if (activeSlide > 0) {
      activeSlide--;
    } else {
      activeSlide = $sliderItem.length - 1;
    }
  }

  $sliderItem.forEach(function (item) {
    item.classList.remove("active");
  });
  $sliderItem[activeSlide].classList.add("active");
}

var interval = setInterval(function () {
  return sliderMove("next");
}, 3000); // slider

var $mainSlider = document.querySelector(".main-slider");
var $mainSliderBtn = document.querySelectorAll("[data-target]");
var $mainSliderItem = document.querySelectorAll(".main-slider__item");
var activeSlid = 0;
$mainSliderItem.forEach(function (item, i) {
  if (item.classList.contains("active")) {
    activeSlid = i;
  }
});
$mainSliderBtn.forEach(function (btn) {
  btn.addEventListener("click", function (e) {
    sliderChange(e.target.getAttribute("id"));
  });
});

function sliderChange(direction) {
  if (direction === "next") {
    if (activeSlid < $mainSliderItem.length - 1) {
      activeSlid++;
    } else {
      activeSlid = 0;
    }
  } else {
    if (activeSlid > 0) {
      activeSlid--;
    } else {
      activeSlid = $mainSliderItem.length - 1;
    }
  }

  $mainSliderItem.forEach(function (item) {
    item.classList.remove("active");
  });
  $mainSliderItem[activeSlid].classList.add("active");
}

var mainInterval = setInterval(function () {
  return sliderChange("next");
}, 3000);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJzZXRUaW1lb3V0Iiwib3B0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwibGluayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuZXdzQm94IiwiaSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmUiLCJnZXQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJmZXRjaCIsImxvY2F0aW9uIiwiaHJlZiIsInRoZW4iLCJyZXNwb25zZSIsInRleHQiLCJkYXRhIiwiZGl2IiwicGFyc2VkUmVzcG9uc2UiLCJ3aW5kb3ciLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJuZXdCb3giLCJhZnRlciIsIm5hdiIsIm5hdkxpbmsiLCJuYXZJdGVtcyIsInNjcm9sbERpc3RhbmNlIiwic2Nyb2xsWSIsImNvbnNvbGUiLCJsb2ciLCJpbm5lcldpZHRoIiwiZm9yRWFjaCIsImVsIiwib2Zmc2V0VG9wIiwiY2xpZW50SGVpZ2h0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJhZGQiLCJzdHlsZSIsIm1vZGFsIiwiaHRtbCIsIm1vZGFsVGl0bGUiLCJtb2RhbENvbnRlbnQiLCJuZXdzVGl0bGUiLCJuZXdzQ29udGVudCIsIm92ZXJmbG93IiwiYnRuIiwic3BhbiIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJkaXNwbGF5Iiwib25jbGljayIsImV2ZW50IiwibW9kYWxDb250YWN0IiwiY29udGFjdEJ0biIsImNvbnRhY3RTcGFuIiwidmFsdWUiLCJnb29nbGVUcmFuc2xhdGVFbGVtZW50SW5pdCIsImdvb2dsZSIsInRyYW5zbGF0ZSIsIlRyYW5zbGF0ZUVsZW1lbnQiLCJwYWdlTGFuZ3VhZ2UiLCJhbmltYXRlIiwib2JqIiwiaW5pdFZhbCIsImxhc3RWYWwiLCJkdXJhdGlvbiIsInN0YXJ0VGltZSIsImN1cnJlbnRUaW1lIiwiRGF0ZSIsIm5vdyIsInN0ZXAiLCJwcm9ncmVzcyIsIk1hdGgiLCJtaW4iLCJmbG9vciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwidGV4dDEiLCJnZXRFbGVtZW50QnlJZCIsInRleHQyIiwidGV4dDMiLCJsb2FkIiwibGlua3MiLCJwYWdlcyIsIm5hdkNvbnRyb2wiLCJuYXZUb2dnbGUiLCJ0b2dnbGUiLCIkc2xpZGVyIiwiJHNsaWRlckJ0biIsIiRzbGlkZXJJdGVtIiwiYWN0aXZlU2xpZGUiLCJpdGVtIiwic2xpZGVyTW92ZSIsImRpcmVjdGlvbiIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCIkbWFpblNsaWRlciIsIiRtYWluU2xpZGVyQnRuIiwiJG1haW5TbGlkZXJJdGVtIiwiYWN0aXZlU2xpZCIsInNsaWRlckNoYW5nZSIsIm1haW5JbnRlcnZhbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDYixNQUFJQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixRQUF2QixDQUFiO0FBQ0FGLEVBQUFBLE1BQU0sQ0FBQ0csU0FBUCxHQUFtQixvQkFBbkI7QUFDSCxDQUhTLEVBR1AsSUFITyxDQUFWO0FBS0EsSUFBSUMsSUFBSSxHQUFHSCxRQUFRLENBQUNJLGdCQUFULENBQTBCLGdCQUExQixDQUFYO0FBRUEsSUFBSUMsT0FBTyxHQUFHTCxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsWUFBdkIsQ0FBZDs7QUFFQSxLQUFLLElBQUlLLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdILElBQUksQ0FBQ0ksTUFBekIsRUFBaUNELENBQUMsRUFBbEMsRUFBc0M7QUFDbENILEVBQUFBLElBQUksQ0FBQ0csQ0FBRCxDQUFKLENBQVFFLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLFVBQUNDLENBQUQsRUFBTztBQUNyQ0EsSUFBQUEsQ0FBQyxDQUFDQyxjQUFGO0FBQ0FMLElBQUFBLE9BQU8sQ0FBQ00sTUFBUjtBQUNBQyxJQUFBQSxHQUFHLEdB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ZSxDQUFDQyxVQUFELENBQWYsQ0FBNEJoRSxTQUE1QixDQUFzQ0UsR0FBdEMsQ0FBMEMsUUFBMUM7QUFDSDs7QUFDRCxJQUFJZ0UsWUFBWSxHQUFHTixXQUFXLENBQUM7QUFBQSxTQUFNSyxZQUFZLENBQUMsTUFBRCxDQUFsQjtBQUFBLENBQUQsRUFBNkIsSUFBN0IsQ0FBOUIiLCJzb3VyY2VzQ29udGVudCI6WyJzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwib3B0aW9uXCIpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IFwiVGlsbmkgbyd6Z2FydGlyaXNoXCI7XHJcbn0sIDE1MDApO1xyXG5cclxubGV0IGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBhZ2luYXRpb25fX2FcIik7XHJcblxyXG5sZXQgbmV3c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3c19fYm94XCIpO1xyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsaW5rW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBuZXdzQm94LnJlbW92ZSgpO1xyXG4gICAgICAgIGdldCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIik7XHJcbiAgICAgICAgZmV0Y2goYCR7bG9jYXRpb24uaHJlZn0ke2dldH1gKVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXdzIC5jb250YWluZXIgLnRpdGxlXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZFJlc3BvbnNlID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBcInRleHQvaHRtbFwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld3NCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5ld3NfX2JveFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzQm94WzFdLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgIGxldCBuZXdCb3ggPSBwYXJzZWRSZXNwb25zZS5xdWVyeVNlbGVjdG9yKFwiLm5ld3NfX2JveFwiKTtcclxuICAgICAgICAgICAgICAgIGRpdi5hZnRlcihuZXdCb3gpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmxldCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKTtcclxubGV0IG5hdkxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fbGlua1wiKTtcclxubGV0IG5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX2l0ZW1zXCIpO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgICBsZXQgc2Nyb2xsRGlzdGFuY2UgPSB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGNvbnNvbGUubG9nKHdpbmRvdy5zY3JvbGxZKTtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VjdGlvbnMtYm9keVwiKS5mb3JFYWNoKChlbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBlbC5vZmZzZXRUb3AgLSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKS5jbGllbnRIZWlnaHQgPD1cclxuICAgICAgICAgICAgICAgIHNjcm9sbERpc3RhbmNlXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYgYVwiKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdiBsaVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIFtpXS5xdWVyeVNlbGVjdG9yKFwiYVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93LnNjcm9sbFkgPiA0MDApIHtcclxuICAgICAgICBuYXYuc3R5bGUgPSBgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IC41cztgO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpPCBuYXZJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuYXZJdGVtc1tpXS5zdHlsZSA9IFwiYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmx1ZSlcIjtcclxuICAgICAgICAgICAgbmF2TGlua1tpXS5zdHlsZSA9IFwiY29sb3I6ICNmZmZcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBuYXYuc3R5bGUgPSBgYmFja2dyb3VuZC1jb2xvcjogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogLjVzO2BcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hdkl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG5hdkl0ZW1zW2ldLnN0eWxlID0gXCJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmXCI7XHJcbiAgICAgICAgICAgIG5hdkxpbmtbaV0uc3R5bGUgPSBcImNvbG9yOiB2YXIoLS1ibGFjaylcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KTtcclxuXHJcbmxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcbmxldCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIik7XHJcbmxldCBtb2RhbFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ibG9ja19fdGl0bGVcIik7XHJcbmxldCBtb2RhbENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJsb2NrX190ZXh0XCIpO1xyXG5sZXQgbmV3c1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uZXdzLWJsb2NrX190aXRsZVwiKTtcclxubGV0IG5ld3NDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uZXdzLWJsb2NrX190ZXh0XCIpO1xyXG5sZXQgb3ZlcmZsb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtYmxvY2tfX3RleHQnKVxyXG5sZXQgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNteUJ0blwiKTtcclxubGV0IHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGJ0bi5sZW5ndGg7IGkrKykge1xyXG4gICAgYnRuW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cobW9kYWxUaXRsZS5pbm5lckhUTUwpO1xyXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgaHRtbC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgb3ZlcmZsb3dbaV0uc3R5bGUgPSBgbWF4LWhlaWdodDogbWF4LWNvbnRlbnQ7YFxyXG4gICAgICAgIG1vZGFsVGl0bGUuaW5uZXJIVE1MID0gbmV3c1RpdGxlW2ldLmlubmVySFRNTDtcclxuICAgICAgICBtb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gbmV3c0NvbnRlbnRbaV0uaW5uZXJIVE1MO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbnNwYW4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnRuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBvdmVyZmxvd1tpXS5zdHlsZSA9IGBtYXgtaGVpZ2h0OiAxNXB4O2BcclxuICAgIH1cclxufTtcclxuXHJcbndpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ0bi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG92ZXJmbG93W2ldLnN0eWxlID0gYG1heC1oZWlnaHQ6IDE1cHg7YFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxubGV0IG1vZGFsQ29udGFjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtY29udGFjdFwiKTtcclxubGV0IGNvbnRhY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRhY3RCdG5cIik7XHJcbmxldCBjb250YWN0U3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVsxXTtcclxuY29uc29sZS5sb2coY29udGFjdEJ0bik7XHJcbmNvbnRhY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiY2xpY2tlZFwiKTtcclxuICAgIG1vZGFsQ29udGFjdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgaHRtbC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhY3RfX2lucHV0XCIpWzBdLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhY3RfX2lucHV0XCIpWzFdLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3RfX3RleHRhcmVhXCIpLnZhbHVlID0gXCJcIjtcclxuICAgIH0sIDEwMCk7XHJcbn0pO1xyXG5cclxuY29udGFjdFNwYW4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIG1vZGFsQ29udGFjdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbn07XHJcblxyXG53aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbENvbnRhY3QpIHtcclxuICAgICAgICBtb2RhbENvbnRhY3Quc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIGdvb2dsZVRyYW5zbGF0ZUVsZW1lbnRJbml0KCkge1xyXG4gICAgbmV3IGdvb2dsZS50cmFuc2xhdGUuVHJhbnNsYXRlRWxlbWVudChcclxuICAgICAgICB7IHBhZ2VMYW5ndWFnZTogXCJ1elwiIH0sXHJcbiAgICAgICAgXCJnb29nbGVfdHJhbnNsYXRlX2VsZW1lbnRcIlxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYW5pbWF0ZShvYmosIGluaXRWYWwsIGxhc3RWYWwsIGR1cmF0aW9uKSB7XHJcbiAgICBsZXQgc3RhcnRUaW1lID0gbnVsbDtcclxuXHJcbiAgICAvL2dldCB0aGUgY3VycmVudCB0aW1lc3RhbXAgYW5kIGFzc2lnbiBpdCB0byB0aGUgY3VycmVudFRpbWUgdmFyaWFibGVcclxuICAgIGxldCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgLy9wYXNzIHRoZSBjdXJyZW50IHRpbWVzdGFtcCB0byB0aGUgc3RlcCBmdW5jdGlvblxyXG4gICAgY29uc3Qgc3RlcCA9IChjdXJyZW50VGltZSkgPT4ge1xyXG4gICAgICAgIC8vaWYgdGhlIHN0YXJ0IHRpbWUgaXMgbnVsbCwgYXNzaWduIHRoZSBjdXJyZW50IHRpbWUgdG8gc3RhcnRUaW1lXHJcbiAgICAgICAgaWYgKCFzdGFydFRpbWUpIHtcclxuICAgICAgICAgICAgc3RhcnRUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgdmFsdWUgdG8gYmUgdXNlZCBpbiBjYWxjdWxhdGluZyB0aGUgbnVtYmVyIHRvIGJlIGRpc3BsYXllZFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oKGN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lKSAvIGR1cmF0aW9uLCAxKTtcclxuXHJcbiAgICAgICAgLy9jYWxjdWxhdGUgd2hhdCB0byBiZSBkaXNwbGF5ZWQgdXNpbmcgdGhlIHZhbHVlIGdvdHRlbiBhYm92ZVxyXG4gICAgICAgIG9iai5pbm5lckhUTUwgPSBNYXRoLmZsb29yKHByb2dyZXNzICogKGxhc3RWYWwgLSBpbml0VmFsKSArIGluaXRWYWwpO1xyXG5cclxuICAgICAgICAvL2NoZWNraW5nIHRvIG1ha2Ugc3VyZSB0aGUgY291bnRlciBkb2VzIG5vdCBleGNlZWQgdGhlIGxhc3QgdmFsdWUgKGxhc3RWYWwpXHJcbiAgICAgICAgaWYgKHByb2dyZXNzIDwgMSkge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vc3RhcnQgYW5pbWF0aW5nXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG59XHJcblxyXG5sZXQgdGV4dDEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZhbHVlMVwiKTtcclxubGV0IHRleHQyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2YWx1ZTJcIik7XHJcbmxldCB0ZXh0MyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmFsdWUzXCIpO1xyXG5cclxuY29uc3QgbG9hZCA9ICgpID0+IHtcclxuICAgIGFuaW1hdGUodGV4dDEsIDAsIDU2NCwgNTAwMCk7XHJcbiAgICBhbmltYXRlKHRleHQyLCAwLCAxMDE1MywgNTAwMCk7XHJcbiAgICBhbmltYXRlKHRleHQzLCAxMDAsIDEwNzE3LCA1MDAwKTtcclxufTtcclxuXHJcbi8vIG5hdiBsaW5rXHJcbmNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX2xpbmtcIik7XHJcbmNvbnN0IHBhZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wYWdlXCIpO1xyXG4vLyBuYXZcclxuY29uc3QgbmF2Q29udHJvbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2X19idG4sIC5uYXZfX2Nsb3NlXCIpLFxyXG4gICAgbmF2VG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX2J0biwgLm5hdl9fbGlzdFwiKTtcclxuXHJcbm5hdkNvbnRyb2wuZm9yRWFjaCgoYnRuKSA9PlxyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgbmF2VG9nZ2xlLmZvckVhY2goKGVsKSA9PiBlbC5jbGFzc0xpc3QudG9nZ2xlKFwib3BlblwiKSk7XHJcbiAgICB9KVxyXG4pO1xyXG5cclxuLy8gc2xpZGVyXHJcblxyXG5jb25zdCAkc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJcIik7XHJcbmNvbnN0ICRzbGlkZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdGFyZ2V0XVwiKTtcclxuY29uc3QgJHNsaWRlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlcl9faXRlbVwiKTtcclxubGV0IGFjdGl2ZVNsaWRlID0gMDtcclxuJHNsaWRlckl0ZW0uZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgYWN0aXZlU2xpZGUgPSBpO1xyXG4gICAgfVxyXG59KTtcclxuJHNsaWRlckJ0bi5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICBzbGlkZXJNb3ZlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHNsaWRlck1vdmUoZGlyZWN0aW9uKSB7XHJcbiAgICBpZiAoZGlyZWN0aW9uID09PSBcIm5leHRcIikge1xyXG4gICAgICAgIGlmIChhY3RpdmVTbGlkZSA8ICRzbGlkZXJJdGVtLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZGUrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkZSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoYWN0aXZlU2xpZGUgPiAwKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWRlLS07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZGUgPSAkc2xpZGVySXRlbS5sZW5ndGggLSAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICRzbGlkZXJJdGVtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICAgICRzbGlkZXJJdGVtW2FjdGl2ZVNsaWRlXS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG59XHJcbmxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHNsaWRlck1vdmUoXCJuZXh0XCIpLCAzMDAwKTtcclxuXHJcbi8vIHNsaWRlclxyXG5cclxuY29uc3QgJG1haW5TbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tc2xpZGVyXCIpO1xyXG5jb25zdCAkbWFpblNsaWRlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS10YXJnZXRdXCIpO1xyXG5jb25zdCAkbWFpblNsaWRlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1haW4tc2xpZGVyX19pdGVtXCIpO1xyXG5sZXQgYWN0aXZlU2xpZCA9IDA7XHJcbiRtYWluU2xpZGVySXRlbS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICBhY3RpdmVTbGlkID0gaTtcclxuICAgIH1cclxufSk7XHJcbiRtYWluU2xpZGVyQnRuLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgIHNsaWRlckNoYW5nZShlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBzbGlkZXJDaGFuZ2UoZGlyZWN0aW9uKSB7XHJcbiAgICBpZiAoZGlyZWN0aW9uID09PSBcIm5leHRcIikge1xyXG4gICAgICAgIGlmIChhY3RpdmVTbGlkIDwgJG1haW5TbGlkZXJJdGVtLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZCsrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZVNsaWQgPiAwKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWQtLTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkID0gJG1haW5TbGlkZXJJdGVtLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgJG1haW5TbGlkZXJJdGVtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICAgICRtYWluU2xpZGVySXRlbVthY3RpdmVTbGlkXS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG59XHJcbmxldCBtYWluSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBzbGlkZXJDaGFuZ2UoXCJuZXh0XCIpLCAzMDAwKTtcclxuIl0sImZpbGUiOiJjb21tb24ubWluLmpzIn0=
