"use strict";

setTimeout(function () {
  var option = document.querySelector('option');
  option.innerHTML = 'Tilni o\'zgartirish';
}, 1500);
var link = document.querySelectorAll('.pagination__a');
var newsBox = document.querySelector('.news__box');

for (var i = 0; i < link.length; i++) {
  link[i].addEventListener('click', function (e) {
    e.preventDefault();
    newsBox.remove();
    get = e.target.getAttribute("href");
    fetch("http://127.0.0.1:8000/".concat(get)).then(function (response) {
      return response.text();
    }).then(function (data) {
      var div = document.querySelector('.news .container .title');
      var parsedResponse = new window.DOMParser().parseFromString(data, "text/html");
      setTimeout(function () {
        var newsBox = document.querySelectorAll('.news__box');
        newsBox[1].remove();
      }, 100);
      var newBox = parsedResponse.querySelector('.news__box');
      div.after(newBox);
    });
  });
}

window.addEventListener('scroll', function () {
  var scrollDistance = window.scrollY;

  if (window.innerWidth > 768) {
    document.querySelectorAll('.sections-body').forEach(function (el, i) {
      if (el.offsetTop - document.querySelector('.nav').clientHeight <= scrollDistance) {
        document.querySelectorAll('.nav a').forEach(function (el) {
          if (el.classList.contains('active')) {
            el.classList.remove('active');
          }
        });
        document.querySelectorAll('.nav li')[i].querySelector('a').classList.add('active');
      }
    });
  }
}); // Get the modal

var modal = document.querySelector('.modal');
var bd = document.querySelector('body');
var modalTitle = document.querySelector('.modal-block__title');
var modalContent = document.querySelector('.modal-block__text');
var newsTitle = document.querySelectorAll('.news-block__title');
var newsContent = document.querySelectorAll('.news-block__text'); // Get the button that opens the modal

var btn = document.querySelectorAll("#myBtn"); // Get the <span> element that closes the modal

var span = document.getElementsByClassName("close")[0]; // When the user clicks the button, open the modal 

var _loop = function _loop(_i) {
  btn[_i].addEventListener('click', function () {
    console.log(modalTitle.innerHTML);
    modal.style.display = "block";
    bd.style.overflow = 'hidden';
    modalTitle.innerHTML = newsTitle[_i].innerHTML;
    modalContent.innerHTML = newsContent[_i].innerHTML;
  });
};

for (var _i = 0; _i < btn.length; _i++) {
  _loop(_i);
} // When the user clicks on <span> (x), close the modal


span.onclick = function () {
  modal.style.display = "none";
  bd.style.overflow = 'auto';
}; // When the user clicks anywhere outside of the modal, close it


window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
};

function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'uz'
  }, 'google_translate_element');
}

function animate(obj, initVal, lastVal, duration) {
  var startTime = null; //get the current timestamp and assign it to the currentTime variable

  var currentTime = Date.now(); //pass the current timestamp to the step function

  var step = function step(currentTime) {
    //if the start time is null, assign the current time to startTime
    if (!startTime) {
      startTime = currentTime;
    } //calculate the value to be used in calculating the number to be displayed


    var progress = Math.min((currentTime - startTime) / duration, 1); //calculate what to be displayed using the value gotten above

    obj.innerHTML = Math.floor(progress * (lastVal - initVal) + initVal); //checking to make sure the counter does not exceed the last value (lastVal)

    if (progress < 1) {
      window.requestAnimationFrame(step);
    } else {
      window.cancelAnimationFrame(window.requestAnimationFrame(step));
    }
  }; //start animating


  window.requestAnimationFrame(step);
}

var text1 = document.getElementById('value1');
var text2 = document.getElementById('value2');
var text3 = document.getElementById('value3');

var load = function load() {
  animate(text1, 0, 564, 5000);
  animate(text2, 0, 10153, 5000);
  animate(text3, 100, 10717, 5000);
}; // nav link


var links = document.querySelectorAll('.nav__link');
var pages = document.querySelectorAll('.page'); // nav

var navControl = document.querySelectorAll('.nav__btn, .nav__close'),
    navToggle = document.querySelectorAll('.nav__btn, .nav__list');
navControl.forEach(function (btn) {
  return btn.addEventListener('click', function () {
    navToggle.forEach(function (el) {
      return el.classList.toggle('open');
    });
  });
}); // slider

var $slider = document.querySelector('.slider');
var $sliderBtn = document.querySelectorAll('[data-target]');
var $sliderItem = document.querySelectorAll('.slider__item');
var activeSlide = 0;
$sliderItem.forEach(function (item, i) {
  if (item.classList.contains('active')) {
    activeSlide = i;
  }
});
$sliderBtn.forEach(function (btn) {
  btn.addEventListener('click', function (e) {
    sliderMove(e.target.getAttribute('id'));
  });
});

function sliderMove(direction) {
  if (direction === 'next') {
    if (activeSlide < $sliderItem.length - 1) {
      activeSlide++;
    } else {
      activeSlide = 0;
    }
  } else {
    if (activeSlide > 0) {
      activeSlide--;
    } else {
      activeSlide = $sliderItem.length - 1;
    }
  }

  $sliderItem.forEach(function (item) {
    item.classList.remove('active');
  });
  $sliderItem[activeSlide].classList.add('active');
}

var interval = setInterval(function () {
  return sliderMove('next');
}, 3000); // slider

var $mainSlider = document.querySelector('.main-slider');
var $mainSliderBtn = document.querySelectorAll('[data-target]');
var $mainSliderItem = document.querySelectorAll('.main-slider__item');
var activeSlid = 0;
$mainSliderItem.forEach(function (item, i) {
  if (item.classList.contains('active')) {
    activeSlid = i;
  }
});
$mainSliderBtn.forEach(function (btn) {
  btn.addEventListener('click', function (e) {
    sliderChange(e.target.getAttribute('id'));
  });
});

function sliderChange(direction) {
  if (direction === 'next') {
    if (activeSlid < $mainSliderItem.length - 1) {
      activeSlid++;
    } else {
      activeSlid = 0;
    }
  } else {
    if (activeSlid > 0) {
      activeSlid--;
    } else {
      activeSlid = $mainSliderItem.length - 1;
    }
  }

  $mainSliderItem.forEach(function (item) {
    item.classList.remove('active');
  });
  $mainSliderItem[activeSlid].classList.add('active');
}

var mainInterval = setInterval(function () {
  return sliderChange('next');
}, 3000);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJzZXRUaW1lb3V0Iiwib3B0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwibGluayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuZXdzQm94IiwiaSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmUiLCJnZXQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInRleHQiLCJkYXRhIiwiZGl2IiwicGFyc2VkUmVzcG9uc2UiLCJ3aW5kb3ciLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJuZXdCb3giLCJhZnRlciIsInNjcm9sbERpc3RhbmNlIiwic2Nyb2xsWSIsImlubmVyV2lkdGgiLCJmb3JFYWNoIiwiZWwiLCJvZmZzZXRUb3AiLCJjbGllbnRIZWlnaHQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsIm1vZGFsIiwiYmQiLCJtb2RhbFRpdGxlIiwibW9kYWxDb250ZW50IiwibmV3c1RpdGxlIiwibmV3c0NvbnRlbnQiLCJidG4iLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJzdHlsZSIsImRpc3BsYXkiLCJvdmVyZmxvdyIsIm9uY2xpY2siLCJldmVudCIsImdvb2dsZVRyYW5zbGF0ZUVsZW1lbnRJbml0IiwiZ29vZ2xlIiwidHJhbnNsYXRlIiwiVHJhbnNsYXRlRWxlbWVudCIsInBhZ2VMYW5ndWFnZSIsImFuaW1hdGUiLCJvYmoiLCJpbml0VmFsIiwibGFzdFZhbCIsImR1cmF0aW9uIiwic3RhcnRUaW1lIiwiY3VycmVudFRpbWUiLCJEYXRlIiwibm93Iiwic3RlcCIsInByb2dyZXNzIiwiTWF0aCIsIm1pbiIsImZsb29yIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ0ZXh0MSIsImdldEVsZW1lbnRCeUlkIiwidGV4dDIiLCJ0ZXh0MyIsImxvYWQiLCJsaW5rcyIsInBhZ2VzIiwibmF2Q29udHJvbCIsIm5hdlRvZ2dsZSIsInRvZ2dsZSIsIiRzbGlkZXIiLCIkc2xpZGVyQnRuIiwiJHNsaWRlckl0ZW0iLCJhY3RpdmVTbGlkZSIsIml0ZW0iLCJzbGlkZXJNb3ZlIiwiZGlyZWN0aW9uIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIiRtYWluU2xpZGVyIiwiJG1haW5TbGlkZXJCdG4iLCIkbWFpblNsaWRlckl0ZW0iLCJhY3RpdmVTbGlkIiwic2xpZGVyQ2hhbmdlIiwibWFpbkludGVydmFsIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxVQUFVLENBQUMsWUFBTTtBQUNiLE1BQUlDLE1BQU0sR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLFFBQXZCLENBQWI7QUFDQUYsRUFBQUEsTUFBTSxDQUFDRyxTQUFQLEdBQW1CLHFCQUFuQjtBQUdILENBTFMsRUFLUCxJQUxPLENBQVY7QUFPQSxJQUFJQyxJQUFJLEdBQUdILFFBQVEsQ0FBQ0ksZ0JBQVQsQ0FBMEIsZ0JBQTFCLENBQVg7QUFFQyxJQUFJQyxPQUFPLEdBQUdMLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixZQUF2QixDQUFkOztBQUVFLEtBQUssSUFBSUssQ0FBQyxHQUFDLENBQVgsRUFBY0EsQ0FBQyxHQUFDSCxJQUFJLENBQUNJLE1BQXJCLEVBQTZCRCxDQUFDLEVBQTlCLEVBQWtDO0FBQ2xDSCxFQUFBQSxJQUFJLENBQUNHLENBQUQsQ0FBSixDQUFRRSxnQkFBUixDQUF5QixPQUF6QixFQUFrQyxVQUFDQyxDQUFELEVBQU07QUFDdENBLElBQUFBLENBQUMsQ0FBQ0MsY0FBRjtBQUNBTCxJQUFBQSxPQUFPLENBQUNNLE1BQVI7QUFDQUMsSUFBQUEsR0FBRyxHQUFHSCxDQUFDLENBQUNJLE1BQUYsQ0FBU0MsWUFBVCxDQUFzQixNQUF0QixDQUFOO0FBQ0FDLElBQUFBLEtBQUssaUNBQTBCSCxHQUExQixFQUFMLENBQ0lJLElBREosQ0FD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QUFBQSxVQUFVO0FBQ2IsS0FGRCxNQUVPO0FBQ0hBLE1BQUFBLFVBQVUsR0FBRyxDQUFiO0FBQ0g7QUFDSixHQU5ELE1BTU87QUFDSCxRQUFJQSxVQUFVLEdBQUcsQ0FBakIsRUFBb0I7QUFDaEJBLE1BQUFBLFVBQVU7QUFDYixLQUZELE1BRU87QUFDSEEsTUFBQUEsVUFBVSxHQUFHRCxlQUFlLENBQUN4RixNQUFoQixHQUF5QixDQUF0QztBQUNIO0FBQ0o7O0FBQ0R3RixFQUFBQSxlQUFlLENBQUNqRSxPQUFoQixDQUF3QixVQUFBMEQsSUFBSSxFQUFJO0FBQzVCQSxJQUFBQSxJQUFJLENBQUN0RCxTQUFMLENBQWV2QixNQUFmLENBQXNCLFFBQXRCO0FBQ0gsR0FGRDtBQUdBb0YsRUFBQUEsZUFBZSxDQUFDQyxVQUFELENBQWYsQ0FBNEI5RCxTQUE1QixDQUFzQ0UsR0FBdEMsQ0FBMEMsUUFBMUM7QUFDSDs7QUFDRCxJQUFJOEQsWUFBWSxHQUFHTixXQUFXLENBQUM7QUFBQSxTQUFNSyxZQUFZLENBQUMsTUFBRCxDQUFsQjtBQUFBLENBQUQsRUFBNkIsSUFBN0IsQ0FBOUIiLCJzb3VyY2VzQ29udGVudCI6WyJzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdvcHRpb24nKVxyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9ICdUaWxuaSBvXFwnemdhcnRpcmlzaCdcclxuXHJcblxyXG59LCAxNTAwKTtcclxuXHJcbmxldCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2luYXRpb25fX2EnKVxyXG5cclxuXHRsZXQgbmV3c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19ib3gnKVxyXG5cclxuICAgZm9yIChsZXQgaT0wOyBpPGxpbmsubGVuZ3RoOyBpKyspIHtcclxuICAgbGlua1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+IHtcclxuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblx0ICAgIG5ld3NCb3gucmVtb3ZlKClcclxuXHQgICAgZ2V0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKVxyXG5cdCAgICBmZXRjaChgaHR0cDovLzEyNy4wLjAuMTo4MDAwLyR7Z2V0fWApXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3cyAuY29udGFpbmVyIC50aXRsZScpXHJcbiAgICAgICAgICAgbGV0IHBhcnNlZFJlc3BvbnNlID0gKG5ldyB3aW5kb3cuRE9NUGFyc2VyKCkpLnBhcnNlRnJvbVN0cmluZyhkYXRhLCBcInRleHQvaHRtbFwiKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBsZXQgbmV3c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXdzX19ib3gnKVxyXG4gICAgICAgIG5ld3NCb3hbMV0ucmVtb3ZlKClcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgIGxldCBuZXdCb3ggPSBwYXJzZWRSZXNwb25zZS5xdWVyeVNlbGVjdG9yKCcubmV3c19fYm94JylcclxuICAgICAgICAgICBkaXYuYWZ0ZXIobmV3Qm94KVxyXG4gICAgICAgIH0pO1xyXG5cdCAgICB9KVxyXG5cclxufVxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG4gICAgbGV0IHNjcm9sbERpc3RhbmNlID0gd2luZG93LnNjcm9sbFk7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb25zLWJvZHknKS5mb3JFYWNoKChlbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZWwub2Zmc2V0VG9wIC0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdicpLmNsaWVudEhlaWdodCA8PSBzY3JvbGxEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdiBhJykuZm9yRWFjaCgoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2IGxpJylbaV0ucXVlcnlTZWxlY3RvcignYScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG4vLyBHZXQgdGhlIG1vZGFsXHJcbnZhciBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpO1xyXG52YXIgYmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbnZhciBtb2RhbFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJsb2NrX190aXRsZScpO1xyXG52YXIgbW9kYWxDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJsb2NrX190ZXh0Jyk7XHJcbnZhciBuZXdzVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmV3cy1ibG9ja19fdGl0bGUnKTtcclxudmFyIG5ld3NDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5ld3MtYmxvY2tfX3RleHQnKTtcclxuXHJcbi8vIEdldCB0aGUgYnV0dG9uIHRoYXQgb3BlbnMgdGhlIG1vZGFsXHJcbnZhciBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI215QnRuXCIpO1xyXG5cclxuLy8gR2V0IHRoZSA8c3Bhbj4gZWxlbWVudCB0aGF0IGNsb3NlcyB0aGUgbW9kYWxcclxudmFyIHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XHJcblxyXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgYnV0dG9uLCBvcGVuIHRoZSBtb2RhbCBcclxuXHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGJ0bi5sZW5ndGg7IGkrKykge1xyXG4gICAgYnRuW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1vZGFsVGl0bGUuaW5uZXJIVE1MKTtcclxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIGJkLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgbW9kYWxUaXRsZS5pbm5lckhUTUwgPSBuZXdzVGl0bGVbaV0uaW5uZXJIVE1MXHJcbiAgICAgICAgbW9kYWxDb250ZW50LmlubmVySFRNTCA9IG5ld3NDb250ZW50W2ldLmlubmVySFRNTFxyXG4gICAgfSlcclxufVxyXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBvbiA8c3Bhbj4gKHgpLCBjbG9zZSB0aGUgbW9kYWxcclxuc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgYmQuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XHJcbn1cclxuXHJcbi8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIGFueXdoZXJlIG91dHNpZGUgb2YgdGhlIG1vZGFsLCBjbG9zZSBpdFxyXG53aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xyXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ29vZ2xlVHJhbnNsYXRlRWxlbWVudEluaXQoKSB7XHJcbiAgICBuZXcgZ29vZ2xlLnRyYW5zbGF0ZS5UcmFuc2xhdGVFbGVtZW50KHsgcGFnZUxhbmd1YWdlOiAndXonIH0sICdnb29nbGVfdHJhbnNsYXRlX2VsZW1lbnQnKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFuaW1hdGUob2JqLCBpbml0VmFsLCBsYXN0VmFsLCBkdXJhdGlvbikge1xyXG5cclxuICAgIGxldCBzdGFydFRpbWUgPSBudWxsO1xyXG5cclxuICAgIC8vZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhbmQgYXNzaWduIGl0IHRvIHRoZSBjdXJyZW50VGltZSB2YXJpYWJsZVxyXG4gICAgbGV0IGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAvL3Bhc3MgdGhlIGN1cnJlbnQgdGltZXN0YW1wIHRvIHRoZSBzdGVwIGZ1bmN0aW9uXHJcbiAgICBjb25zdCBzdGVwID0gKGN1cnJlbnRUaW1lKSA9PiB7XHJcblxyXG4gICAgICAgIC8vaWYgdGhlIHN0YXJ0IHRpbWUgaXMgbnVsbCwgYXNzaWduIHRoZSBjdXJyZW50IHRpbWUgdG8gc3RhcnRUaW1lXHJcbiAgICAgICAgaWYgKCFzdGFydFRpbWUpIHtcclxuICAgICAgICAgICAgc3RhcnRUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgdmFsdWUgdG8gYmUgdXNlZCBpbiBjYWxjdWxhdGluZyB0aGUgbnVtYmVyIHRvIGJlIGRpc3BsYXllZFxyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oKGN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lKSAvIGR1cmF0aW9uLCAxKTtcclxuXHJcbiAgICAgICAgLy9jYWxjdWxhdGUgd2hhdCB0byBiZSBkaXNwbGF5ZWQgdXNpbmcgdGhlIHZhbHVlIGdvdHRlbiBhYm92ZVxyXG4gICAgICAgIG9iai5pbm5lckhUTUwgPSBNYXRoLmZsb29yKHByb2dyZXNzICogKGxhc3RWYWwgLSBpbml0VmFsKSArIGluaXRWYWwpO1xyXG5cclxuICAgICAgICAvL2NoZWNraW5nIHRvIG1ha2Ugc3VyZSB0aGUgY291bnRlciBkb2VzIG5vdCBleGNlZWQgdGhlIGxhc3QgdmFsdWUgKGxhc3RWYWwpXHJcbiAgICAgICAgaWYgKHByb2dyZXNzIDwgMSkge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy9zdGFydCBhbmltYXRpbmdcclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XHJcbn1cclxuXHJcbmxldCB0ZXh0MSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YWx1ZTEnKTtcclxubGV0IHRleHQyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhbHVlMicpO1xyXG5sZXQgdGV4dDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmFsdWUzJyk7XHJcblxyXG5cclxuY29uc3QgbG9hZCA9ICgpID0+IHtcclxuICAgIGFuaW1hdGUodGV4dDEsIDAsIDU2NCwgNTAwMCk7XHJcbiAgICBhbmltYXRlKHRleHQyLCAwLCAxMDE1MywgNTAwMCk7XHJcbiAgICBhbmltYXRlKHRleHQzLCAxMDAsIDEwNzE3LCA1MDAwKTtcclxufVxyXG5cclxuXHJcblxyXG4vLyBuYXYgbGlua1xyXG5jb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZfX2xpbmsnKTtcclxuY29uc3QgcGFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFnZScpO1xyXG4vLyBuYXZcclxuY29uc3QgbmF2Q29udHJvbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZfX2J0biwgLm5hdl9fY2xvc2UnKSxcclxuICAgIG5hdlRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZfX2J0biwgLm5hdl9fbGlzdCcpO1xyXG5cclxubmF2Q29udHJvbC5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBuYXZUb2dnbGUuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJykpXHJcbn0pKVxyXG5cclxuLy8gc2xpZGVyXHJcblxyXG5jb25zdCAkc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpO1xyXG5jb25zdCAkc2xpZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdGFyZ2V0XScpO1xyXG5jb25zdCAkc2xpZGVySXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX2l0ZW0nKTtcclxubGV0IGFjdGl2ZVNsaWRlID0gMFxyXG4kc2xpZGVySXRlbS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgYWN0aXZlU2xpZGUgPSBpXHJcbiAgICB9XHJcbn0pXHJcbiRzbGlkZXJCdG4uZm9yRWFjaChidG4gPT4ge1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBzbGlkZXJNb3ZlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaWQnKSlcclxuICAgIH0pXHJcbn0pXHJcblxyXG5mdW5jdGlvbiBzbGlkZXJNb3ZlKGRpcmVjdGlvbikge1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ25leHQnKSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZVNsaWRlIDwgJHNsaWRlckl0ZW0ubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkZSsrXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZGUgPSAwXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoYWN0aXZlU2xpZGUgPiAwKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWRlLS1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkZSA9ICRzbGlkZXJJdGVtLmxlbmd0aCAtIDFcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAkc2xpZGVySXRlbS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIH0pXHJcbiAgICAkc2xpZGVySXRlbVthY3RpdmVTbGlkZV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxufVxyXG5sZXQgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBzbGlkZXJNb3ZlKCduZXh0JyksIDMwMDApXHJcblxyXG4vLyBzbGlkZXJcclxuXHJcbmNvbnN0ICRtYWluU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tc2xpZGVyJyk7XHJcbmNvbnN0ICRtYWluU2xpZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdGFyZ2V0XScpO1xyXG5jb25zdCAkbWFpblNsaWRlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1zbGlkZXJfX2l0ZW0nKTtcclxubGV0IGFjdGl2ZVNsaWQgPSAwXHJcbiRtYWluU2xpZGVySXRlbS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgYWN0aXZlU2xpZCA9IGlcclxuICAgIH1cclxufSlcclxuJG1haW5TbGlkZXJCdG4uZm9yRWFjaChidG4gPT4ge1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBzbGlkZXJDaGFuZ2UoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdpZCcpKVxyXG4gICAgfSlcclxufSlcclxuXHJcbmZ1bmN0aW9uIHNsaWRlckNoYW5nZShkaXJlY3Rpb24pIHtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICduZXh0Jykge1xyXG4gICAgICAgIGlmIChhY3RpdmVTbGlkIDwgJG1haW5TbGlkZXJJdGVtLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZCsrXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZCA9IDBcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChhY3RpdmVTbGlkID4gMCkge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkLS1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkID0gJG1haW5TbGlkZXJJdGVtLmxlbmd0aCAtIDFcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAkbWFpblNsaWRlckl0ZW0uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICB9KVxyXG4gICAgJG1haW5TbGlkZXJJdGVtW2FjdGl2ZVNsaWRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbn1cclxubGV0IG1haW5JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHNsaWRlckNoYW5nZSgnbmV4dCcpLCAzMDAwKVxyXG4iXSwiZmlsZSI6ImNvbW1vbi5taW4uanMifQ==
