"use strict";

setTimeout(function () {
  var option = document.querySelector("option");
  option.innerHTML = "Tilni o'zgartirish";
}, 1500);
var link = document.querySelectorAll(".pagination__a");
var newsBox = document.querySelector(".news__box");

for (var i = 0; i < link.length; i++) {
  link[i].addEventListener("click", function (e) {
    e.preventDefault();
    newsBox.remove();
    get = e.target.getAttribute("href");
    fetch("http://127.0.0.1:8000/".concat(get)).then(function (response) {
      return response.text();
    }).then(function (data) {
      var div = document.querySelector(".news .container .title");
      var parsedResponse = new window.DOMParser().parseFromString(data, "text/html");
      setTimeout(function () {
        var newsBox = document.querySelectorAll(".news__box");
        newsBox[1].remove();
      }, 100);
      var newBox = parsedResponse.querySelector(".news__box");
      div.after(newBox);
    });
  });
}

var nav = document.querySelector(".nav");
var navLink = document.querySelectorAll(".nav__link");
var navItems = document.querySelectorAll(".nav__items");
window.addEventListener("scroll", function () {
  var scrollDistance = window.scrollY;
  console.log(window.scrollY);

  if (window.innerWidth > 768) {
    document.querySelectorAll(".sections-body").forEach(function (el, i) {
      if (el.offsetTop - document.querySelector(".nav").clientHeight <= scrollDistance) {
        document.querySelectorAll(".nav a").forEach(function (el) {
          if (el.classList.contains("active")) {
            el.classList.remove("active");
          }
        });
        document.querySelectorAll(".nav li")[i].querySelector("a").classList.add("active");
      }
    });
  }

  if (window.scrollY > 400) {
    nav.style = "background-color: var(--blue);\n                     transition: .5s;";

    for (var _i = 0; _i < navItems.length; _i++) {
      navItems[_i].style = "background-color: var(--blue)";
      navLink[_i].style = "color: #fff";
    }
  } else {
    nav.style = "background-color: none;\n                     transition: .5s;";

    for (var _i2 = 0; _i2 < navItems.length; _i2++) {
      navItems[_i2].style = "background-color: #fff";
      navLink[_i2].style = "color: var(--black)";
    }
  }
}); // Get the modal

var modal = document.querySelector(".modal");
var html = document.querySelector("html");
var modalTitle = document.querySelector(".modal-block__title");
var modalContent = document.querySelector(".modal-block__text");
var newsTitle = document.querySelectorAll(".news-block__title");
var newsContent = document.querySelectorAll(".news-block__text");
var btn = document.querySelectorAll("#myBtn");
var span = document.getElementsByClassName("close")[0];

var _loop = function _loop(_i3) {
  btn[_i3].addEventListener("click", function () {
    console.log(modalTitle.innerHTML);
    modal.style.display = "block";
    html.style.overflow = "hidden";
    modalTitle.innerHTML = newsTitle[_i3].innerHTML;
    modalContent.innerHTML = newsContent[_i3].innerHTML;
  });
};

for (var _i3 = 0; _i3 < btn.length; _i3++) {
  _loop(_i3);
}

span.onclick = function () {
  modal.style.display = "none";
  html.style.overflow = "auto";
};

window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
    html.style.overflow = "auto";
  }
};

var modalContact = document.querySelector(".modal-contact");
var contactBtn = document.querySelector("#contactBtn");
var contactSpan = document.getElementsByClassName("close")[1];
console.log(contactBtn);
contactBtn.addEventListener("click", function () {
  console.log("clicked");
  modalContact.style.display = "block";
  html.style.overflow = "hidden";
  setTimeout(function () {
    document.querySelectorAll(".contact__input")[0].value = "";
    document.querySelectorAll(".contact__input")[1].value = "";
    document.querySelector(".contact__textarea").value = "";
  }, 100);
});

contactSpan.onclick = function () {
  modalContact.style.display = "none";
  html.style.overflow = "auto";
};

window.onclick = function (event) {
  if (event.target == modalContact) {
    modalContact.style.display = "none";
    html.style.overflow = "auto";
  }
};

function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: "uz"
  }, "google_translate_element");
}

function animate(obj, initVal, lastVal, duration) {
  var startTime = null; //get the current timestamp and assign it to the currentTime variable

  var currentTime = Date.now(); //pass the current timestamp to the step function

  var step = function step(currentTime) {
    //if the start time is null, assign the current time to startTime
    if (!startTime) {
      startTime = currentTime;
    } //calculate the value to be used in calculating the number to be displayed


    var progress = Math.min((currentTime - startTime) / duration, 1); //calculate what to be displayed using the value gotten above

    obj.innerHTML = Math.floor(progress * (lastVal - initVal) + initVal); //checking to make sure the counter does not exceed the last value (lastVal)

    if (progress < 1) {
      window.requestAnimationFrame(step);
    } else {
      window.cancelAnimationFrame(window.requestAnimationFrame(step));
    }
  }; //start animating


  window.requestAnimationFrame(step);
}

var text1 = document.getElementById("value1");
var text2 = document.getElementById("value2");
var text3 = document.getElementById("value3");

var load = function load() {
  animate(text1, 0, 564, 5000);
  animate(text2, 0, 10153, 5000);
  animate(text3, 100, 10717, 5000);
}; // nav link


var links = document.querySelectorAll(".nav__link");
var pages = document.querySelectorAll(".page"); // nav

var navControl = document.querySelectorAll(".nav__btn, .nav__close"),
    navToggle = document.querySelectorAll(".nav__btn, .nav__list");
navControl.forEach(function (btn) {
  return btn.addEventListener("click", function () {
    navToggle.forEach(function (el) {
      return el.classList.toggle("open");
    });
  });
}); // slider

var $slider = document.querySelector(".slider");
var $sliderBtn = document.querySelectorAll("[data-target]");
var $sliderItem = document.querySelectorAll(".slider__item");
var activeSlide = 0;
$sliderItem.forEach(function (item, i) {
  if (item.classList.contains("active")) {
    activeSlide = i;
  }
});
$sliderBtn.forEach(function (btn) {
  btn.addEventListener("click", function (e) {
    sliderMove(e.target.getAttribute("id"));
  });
});

function sliderMove(direction) {
  if (direction === "next") {
    if (activeSlide < $sliderItem.length - 1) {
      activeSlide++;
    } else {
      activeSlide = 0;
    }
  } else {
    if (activeSlide > 0) {
      activeSlide--;
    } else {
      activeSlide = $sliderItem.length - 1;
    }
  }

  $sliderItem.forEach(function (item) {
    item.classList.remove("active");
  });
  $sliderItem[activeSlide].classList.add("active");
}

var interval = setInterval(function () {
  return sliderMove("next");
}, 3000); // slider

var $mainSlider = document.querySelector(".main-slider");
var $mainSliderBtn = document.querySelectorAll("[data-target]");
var $mainSliderItem = document.querySelectorAll(".main-slider__item");
var activeSlid = 0;
$mainSliderItem.forEach(function (item, i) {
  if (item.classList.contains("active")) {
    activeSlid = i;
  }
});
$mainSliderBtn.forEach(function (btn) {
  btn.addEventListener("click", function (e) {
    sliderChange(e.target.getAttribute("id"));
  });
});

function sliderChange(direction) {
  if (direction === "next") {
    if (activeSlid < $mainSliderItem.length - 1) {
      activeSlid++;
    } else {
      activeSlid = 0;
    }
  } else {
    if (activeSlid > 0) {
      activeSlid--;
    } else {
      activeSlid = $mainSliderItem.length - 1;
    }
  }

  $mainSliderItem.forEach(function (item) {
    item.classList.remove("active");
  });
  $mainSliderItem[activeSlid].classList.add("active");
}

var mainInterval = setInterval(function () {
  return sliderChange("next");
}, 3000);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJzZXRUaW1lb3V0Iiwib3B0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwibGluayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuZXdzQm94IiwiaSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmUiLCJnZXQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInRleHQiLCJkYXRhIiwiZGl2IiwicGFyc2VkUmVzcG9uc2UiLCJ3aW5kb3ciLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJuZXdCb3giLCJhZnRlciIsIm5hdiIsIm5hdkxpbmsiLCJuYXZJdGVtcyIsInNjcm9sbERpc3RhbmNlIiwic2Nyb2xsWSIsImNvbnNvbGUiLCJsb2ciLCJpbm5lcldpZHRoIiwiZm9yRWFjaCIsImVsIiwib2Zmc2V0VG9wIiwiY2xpZW50SGVpZ2h0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJhZGQiLCJzdHlsZSIsIm1vZGFsIiwiaHRtbCIsIm1vZGFsVGl0bGUiLCJtb2RhbENvbnRlbnQiLCJuZXdzVGl0bGUiLCJuZXdzQ29udGVudCIsImJ0biIsInNwYW4iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZGlzcGxheSIsIm92ZXJmbG93Iiwib25jbGljayIsImV2ZW50IiwibW9kYWxDb250YWN0IiwiY29udGFjdEJ0biIsImNvbnRhY3RTcGFuIiwidmFsdWUiLCJnb29nbGVUcmFuc2xhdGVFbGVtZW50SW5pdCIsImdvb2dsZSIsInRyYW5zbGF0ZSIsIlRyYW5zbGF0ZUVsZW1lbnQiLCJwYWdlTGFuZ3VhZ2UiLCJhbmltYXRlIiwib2JqIiwiaW5pdFZhbCIsImxhc3RWYWwiLCJkdXJhdGlvbiIsInN0YXJ0VGltZSIsImN1cnJlbnRUaW1lIiwiRGF0ZSIsIm5vdyIsInN0ZXAiLCJwcm9ncmVzcyIsIk1hdGgiLCJtaW4iLCJmbG9vciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwidGV4dDEiLCJnZXRFbGVtZW50QnlJZCIsInRleHQyIiwidGV4dDMiLCJsb2FkIiwibGlua3MiLCJwYWdlcyIsIm5hdkNvbnRyb2wiLCJuYXZUb2dnbGUiLCJ0b2dnbGUiLCIkc2xpZGVyIiwiJHNsaWRlckJ0biIsIiRzbGlkZXJJdGVtIiwiYWN0aXZlU2xpZGUiLCJpdGVtIiwic2xpZGVyTW92ZSIsImRpcmVjdGlvbiIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCIkbWFpblNsaWRlciIsIiRtYWluU2xpZGVyQnRuIiwiJG1haW5TbGlkZXJJdGVtIiwiYWN0aXZlU2xpZCIsInNsaWRlckNoYW5nZSIsIm1haW5JbnRlcnZhbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDYixNQUFJQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixRQUF2QixDQUFiO0FBQ0FGLEVBQUFBLE1BQU0sQ0FBQ0csU0FBUCxHQUFtQixvQkFBbkI7QUFDSCxDQUhTLEVBR1AsSUFITyxDQUFWO0FBS0EsSUFBSUMsSUFBSSxHQUFHSCxRQUFRLENBQUNJLGdCQUFULENBQTBCLGdCQUExQixDQUFYO0FBRUEsSUFBSUMsT0FBTyxHQUFHTCxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsWUFBdkIsQ0FBZDs7QUFFQSxLQUFLLElBQUlLLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdILElBQUksQ0FBQ0ksTUFBekIsRUFBaUNELENBQUMsRUFBbEMsRUFBc0M7QUFDbENILEVBQUFBLElBQUksQ0FBQ0csQ0FBRCxDQUFKLENBQVFFLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLFVBQUNDLENBQUQsRUFBTztBQUNyQ0EsSUFBQUEsQ0FBQyxDQUFDQyxjQUFGO0FBQ0FMLElBQUFBLE9BQU8sQ0FBQ00sTUFBUjtBQUNBQyxJQUFBQSxHQUFHLEdBQUdILENBQUMsQ0FBQ0ksTUFB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QUFTMEYsWUFBVCxDQUFzQlAsU0FBdEIsRUFBaUM7QUFDN0IsTUFBSUEsU0FBUyxLQUFLLE1BQWxCLEVBQTBCO0FBQ3RCLFFBQUlNLFVBQVUsR0FBR0QsZUFBZSxDQUFDL0YsTUFBaEIsR0FBeUIsQ0FBMUMsRUFBNkM7QUFDekNnRyxNQUFBQSxVQUFVO0FBQ2IsS0FGRCxNQUVPO0FBQ0hBLE1BQUFBLFVBQVUsR0FBRyxDQUFiO0FBQ0g7QUFDSixHQU5ELE1BTU87QUFDSCxRQUFJQSxVQUFVLEdBQUcsQ0FBakIsRUFBb0I7QUFDaEJBLE1BQUFBLFVBQVU7QUFDYixLQUZELE1BRU87QUFDSEEsTUFBQUEsVUFBVSxHQUFHRCxlQUFlLENBQUMvRixNQUFoQixHQUF5QixDQUF0QztBQUNIO0FBQ0o7O0FBQ0QrRixFQUFBQSxlQUFlLENBQUNuRSxPQUFoQixDQUF3QixVQUFDNEQsSUFBRCxFQUFVO0FBQzlCQSxJQUFBQSxJQUFJLENBQUN4RCxTQUFMLENBQWU1QixNQUFmLENBQXNCLFFBQXRCO0FBQ0gsR0FGRDtBQUdBMkYsRUFBQUEsZUFBZSxDQUFDQyxVQUFELENBQWYsQ0FBNEJoRSxTQUE1QixDQUFzQ0UsR0FBdEMsQ0FBMEMsUUFBMUM7QUFDSDs7QUFDRCxJQUFJZ0UsWUFBWSxHQUFHTixXQUFXLENBQUM7QUFBQSxTQUFNSyxZQUFZLENBQUMsTUFBRCxDQUFsQjtBQUFBLENBQUQsRUFBNkIsSUFBN0IsQ0FBOUIiLCJzb3VyY2VzQ29udGVudCI6WyJzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwib3B0aW9uXCIpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IFwiVGlsbmkgbyd6Z2FydGlyaXNoXCI7XHJcbn0sIDE1MDApO1xyXG5cclxubGV0IGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBhZ2luYXRpb25fX2FcIik7XHJcblxyXG5sZXQgbmV3c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3c19fYm94XCIpO1xyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsaW5rW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBuZXdzQm94LnJlbW92ZSgpO1xyXG4gICAgICAgIGdldCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIik7XHJcbiAgICAgICAgZmV0Y2goYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC8ke2dldH1gKVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXdzIC5jb250YWluZXIgLnRpdGxlXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZFJlc3BvbnNlID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBcInRleHQvaHRtbFwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld3NCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5ld3NfX2JveFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzQm94WzFdLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgIGxldCBuZXdCb3ggPSBwYXJzZWRSZXNwb25zZS5xdWVyeVNlbGVjdG9yKFwiLm5ld3NfX2JveFwiKTtcclxuICAgICAgICAgICAgICAgIGRpdi5hZnRlcihuZXdCb3gpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmxldCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKTtcclxubGV0IG5hdkxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fbGlua1wiKTtcclxubGV0IG5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX2l0ZW1zXCIpO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgICBsZXQgc2Nyb2xsRGlzdGFuY2UgPSB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGNvbnNvbGUubG9nKHdpbmRvdy5zY3JvbGxZKTtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VjdGlvbnMtYm9keVwiKS5mb3JFYWNoKChlbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBlbC5vZmZzZXRUb3AgLSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlwiKS5jbGllbnRIZWlnaHQgPD1cclxuICAgICAgICAgICAgICAgIHNjcm9sbERpc3RhbmNlXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYgYVwiKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdiBsaVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIFtpXS5xdWVyeVNlbGVjdG9yKFwiYVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93LnNjcm9sbFkgPiA0MDApIHtcclxuICAgICAgICBuYXYuc3R5bGUgPSBgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IC41cztgO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpPCBuYXZJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuYXZJdGVtc1tpXS5zdHlsZSA9IFwiYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmx1ZSlcIjtcclxuICAgICAgICAgICAgbmF2TGlua1tpXS5zdHlsZSA9IFwiY29sb3I6ICNmZmZcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBuYXYuc3R5bGUgPSBgYmFja2dyb3VuZC1jb2xvcjogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogLjVzO2BcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hdkl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG5hdkl0ZW1zW2ldLnN0eWxlID0gXCJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmXCI7XHJcbiAgICAgICAgICAgIG5hdkxpbmtbaV0uc3R5bGUgPSBcImNvbG9yOiB2YXIoLS1ibGFjaylcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KTtcclxuLy8gR2V0IHRoZSBtb2RhbFxyXG5sZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xyXG5sZXQgaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJodG1sXCIpO1xyXG5sZXQgbW9kYWxUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYmxvY2tfX3RpdGxlXCIpO1xyXG5sZXQgbW9kYWxDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ibG9ja19fdGV4dFwiKTtcclxubGV0IG5ld3NUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmV3cy1ibG9ja19fdGl0bGVcIik7XHJcbmxldCBuZXdzQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmV3cy1ibG9ja19fdGV4dFwiKTtcclxuXHJcbmxldCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI215QnRuXCIpO1xyXG5sZXQgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVswXTtcclxuXHJcbmZvciAobGV0IGkgPSAwOyBpIDwgYnRuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBidG5baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhtb2RhbFRpdGxlLmlubmVySFRNTCk7XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICBtb2RhbFRpdGxlLmlubmVySFRNTCA9IG5ld3NUaXRsZVtpXS5pbm5lckhUTUw7XHJcbiAgICAgICAgbW9kYWxDb250ZW50LmlubmVySFRNTCA9IG5ld3NDb250ZW50W2ldLmlubmVySFRNTDtcclxuICAgIH0pO1xyXG59XHJcblxyXG5zcGFuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbn07XHJcblxyXG53aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xyXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbiAgICB9XHJcbn07XHJcbmxldCBtb2RhbENvbnRhY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNvbnRhY3RcIik7XHJcbmxldCBjb250YWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250YWN0QnRuXCIpO1xyXG5sZXQgY29udGFjdFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMV07XHJcbmNvbnNvbGUubG9nKGNvbnRhY3RCdG4pO1xyXG5jb250YWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcImNsaWNrZWRcIik7XHJcbiAgICBtb2RhbENvbnRhY3Quc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWN0X19pbnB1dFwiKVswXS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250YWN0X19pbnB1dFwiKVsxXS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWN0X190ZXh0YXJlYVwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICB9LCAxMDApO1xyXG59KTtcclxuXHJcbmNvbnRhY3RTcGFuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBtb2RhbENvbnRhY3Quc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgaHRtbC5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG59O1xyXG5cclxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWxDb250YWN0KSB7XHJcbiAgICAgICAgbW9kYWxDb250YWN0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnb29nbGVUcmFuc2xhdGVFbGVtZW50SW5pdCgpIHtcclxuICAgIG5ldyBnb29nbGUudHJhbnNsYXRlLlRyYW5zbGF0ZUVsZW1lbnQoXHJcbiAgICAgICAgeyBwYWdlTGFuZ3VhZ2U6IFwidXpcIiB9LFxyXG4gICAgICAgIFwiZ29vZ2xlX3RyYW5zbGF0ZV9lbGVtZW50XCJcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFuaW1hdGUob2JqLCBpbml0VmFsLCBsYXN0VmFsLCBkdXJhdGlvbikge1xyXG4gICAgbGV0IHN0YXJ0VGltZSA9IG51bGw7XHJcblxyXG4gICAgLy9nZXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGN1cnJlbnRUaW1lIHZhcmlhYmxlXHJcbiAgICBsZXQgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIC8vcGFzcyB0aGUgY3VycmVudCB0aW1lc3RhbXAgdG8gdGhlIHN0ZXAgZnVuY3Rpb25cclxuICAgIGNvbnN0IHN0ZXAgPSAoY3VycmVudFRpbWUpID0+IHtcclxuICAgICAgICAvL2lmIHRoZSBzdGFydCB0aW1lIGlzIG51bGwsIGFzc2lnbiB0aGUgY3VycmVudCB0aW1lIHRvIHN0YXJ0VGltZVxyXG4gICAgICAgIGlmICghc3RhcnRUaW1lKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jYWxjdWxhdGUgdGhlIHZhbHVlIHRvIGJlIHVzZWQgaW4gY2FsY3VsYXRpbmcgdGhlIG51bWJlciB0byBiZSBkaXNwbGF5ZWRcclxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKChjdXJyZW50VGltZSAtIHN0YXJ0VGltZSkgLyBkdXJhdGlvbiwgMSk7XHJcblxyXG4gICAgICAgIC8vY2FsY3VsYXRlIHdoYXQgdG8gYmUgZGlzcGxheWVkIHVzaW5nIHRoZSB2YWx1ZSBnb3R0ZW4gYWJvdmVcclxuICAgICAgICBvYmouaW5uZXJIVE1MID0gTWF0aC5mbG9vcihwcm9ncmVzcyAqIChsYXN0VmFsIC0gaW5pdFZhbCkgKyBpbml0VmFsKTtcclxuXHJcbiAgICAgICAgLy9jaGVja2luZyB0byBtYWtlIHN1cmUgdGhlIGNvdW50ZXIgZG9lcyBub3QgZXhjZWVkIHRoZSBsYXN0IHZhbHVlIChsYXN0VmFsKVxyXG4gICAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL3N0YXJ0IGFuaW1hdGluZ1xyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxufVxyXG5cclxubGV0IHRleHQxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2YWx1ZTFcIik7XHJcbmxldCB0ZXh0MiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmFsdWUyXCIpO1xyXG5sZXQgdGV4dDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZhbHVlM1wiKTtcclxuXHJcbmNvbnN0IGxvYWQgPSAoKSA9PiB7XHJcbiAgICBhbmltYXRlKHRleHQxLCAwLCA1NjQsIDUwMDApO1xyXG4gICAgYW5pbWF0ZSh0ZXh0MiwgMCwgMTAxNTMsIDUwMDApO1xyXG4gICAgYW5pbWF0ZSh0ZXh0MywgMTAwLCAxMDcxNywgNTAwMCk7XHJcbn07XHJcblxyXG4vLyBuYXYgbGlua1xyXG5jb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2X19saW5rXCIpO1xyXG5jb25zdCBwYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFnZVwiKTtcclxuLy8gbmF2XHJcbmNvbnN0IG5hdkNvbnRyb2wgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fYnRuLCAubmF2X19jbG9zZVwiKSxcclxuICAgIG5hdlRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2X19idG4sIC5uYXZfX2xpc3RcIik7XHJcblxyXG5uYXZDb250cm9sLmZvckVhY2goKGJ0bikgPT5cclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIG5hdlRvZ2dsZS5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZShcIm9wZW5cIikpO1xyXG4gICAgfSlcclxuKTtcclxuXHJcbi8vIHNsaWRlclxyXG5cclxuY29uc3QgJHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyXCIpO1xyXG5jb25zdCAkc2xpZGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRhcmdldF1cIik7XHJcbmNvbnN0ICRzbGlkZXJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZXJfX2l0ZW1cIik7XHJcbmxldCBhY3RpdmVTbGlkZSA9IDA7XHJcbiRzbGlkZXJJdGVtLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgIGFjdGl2ZVNsaWRlID0gaTtcclxuICAgIH1cclxufSk7XHJcbiRzbGlkZXJCdG4uZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgc2xpZGVyTW92ZShlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBzbGlkZXJNb3ZlKGRpcmVjdGlvbikge1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcclxuICAgICAgICBpZiAoYWN0aXZlU2xpZGUgPCAkc2xpZGVySXRlbS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWRlKys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZGUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZVNsaWRlID4gMCkge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkZS0tO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWRlID0gJHNsaWRlckl0ZW0ubGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAkc2xpZGVySXRlbS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgICAkc2xpZGVySXRlbVthY3RpdmVTbGlkZV0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxufVxyXG5sZXQgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBzbGlkZXJNb3ZlKFwibmV4dFwiKSwgMzAwMCk7XHJcblxyXG4vLyBzbGlkZXJcclxuXHJcbmNvbnN0ICRtYWluU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLXNsaWRlclwiKTtcclxuY29uc3QgJG1haW5TbGlkZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdGFyZ2V0XVwiKTtcclxuY29uc3QgJG1haW5TbGlkZXJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tYWluLXNsaWRlcl9faXRlbVwiKTtcclxubGV0IGFjdGl2ZVNsaWQgPSAwO1xyXG4kbWFpblNsaWRlckl0ZW0uZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgYWN0aXZlU2xpZCA9IGk7XHJcbiAgICB9XHJcbn0pO1xyXG4kbWFpblNsaWRlckJ0bi5mb3JFYWNoKChidG4pID0+IHtcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICBzbGlkZXJDaGFuZ2UoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIikpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gc2xpZGVyQ2hhbmdlKGRpcmVjdGlvbikge1xyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcclxuICAgICAgICBpZiAoYWN0aXZlU2xpZCA8ICRtYWluU2xpZGVySXRlbS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWQrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChhY3RpdmVTbGlkID4gMCkge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkLS07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZCA9ICRtYWluU2xpZGVySXRlbS5sZW5ndGggLSAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICRtYWluU2xpZGVySXRlbS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgICAkbWFpblNsaWRlckl0ZW1bYWN0aXZlU2xpZF0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxufVxyXG5sZXQgbWFpbkludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gc2xpZGVyQ2hhbmdlKFwibmV4dFwiKSwgMzAwMCk7XHJcbiJdLCJmaWxlIjoiY29tbW9uLm1pbi5qcyJ9
